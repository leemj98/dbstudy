DROP TABLE LECTURE_TBL;
DROP TABLE ENROLL_TBL;
DROP TABLE STUDENT_TBL;
DROP TABLE PROFESSOR_TBL;
DROP TABLE COURSE_TBL;

CREATE TABLE COURSE_TBL (
    COUR_NO NUMBER NOT NULL,
    COUR_NAME VARCHAR2(30 BYTE),
    COUR_SCOR NUMBER,
    CONSTRAINT PK_COUR PRIMARY KEY(COUR_NO)
);

CREATE TABLE PROFESSOR_TBL (
    PROF_NO NUMBER NOT NULL,
    PROF_NAME VARCHAR2(30 BYTE),
    PROF_SBJ VARCHAR2(30 BYTE),
    CONSTRAINT PK_PROF PRIMARY KEY(PROF_NO)
);

CREATE TABLE STUDENT_TBL (
    STUD_NO NUMBER NOT NULL,
    STUD_NAME VARCHAR2(30 BYTE), 
    ADDRESS VARCHAR2(100 BYTE),
    GRADE NUMBER,
    SPROF_NO NUMBER,
    CONSTRAINT PK_STUD PRIMARY KEY(STUD_NO),
    CONSTRAINT FK_SPROF_NO FOREIGN KEY(SPROF_NO) REFERENCES PROFESSOR_TBL(PROF_NO)
);

CREATE TABLE ENROLL_TBL (
    ENRL_NO NUMBER NOT NULL,
    STUD_NO NUMBER,
    COUR_NO NUMBER,
    ENRL_DATE DATE,
    CONSTRAINT PK_ENRL PRIMARY KEY(ENRL_NO),
    CONSTRAINT FK_STUD_NO FOREIGN KEY(STUD_NO) REFERENCES STUDENT_TBL(STUD_NO),
    CONSTRAINT FK_COUR_NO FOREIGN KEY(COUR_NO) REFERENCES COURSE_TBL(COUR_NO)
);

CREATE TABLE LECTURE_TBL (
    LECT_NO NUMBER NOT NULL,
    LPROF_NO NUMBER,
    ENRL_NO NUMBER,
    LECT_NAME VARCHAR2(30 BYTE),
    LECT_ROOM VARCHAR2(30 BYTE),
    CONSTRAINT PK_LECT PRIMARY KEY(LECT_NO),
    CONSTRAINT FK_LPROF_NO FOREIGN KEY(LPROF_NO) REFERENCES PROFESSOR_TBL(PROF_NO),
    CONSTRAINT FK_ENRL_NO FOREIGN KEY(ENRL_NO) REFERENCES ENROLL_TBL(ENRL_NO)
);

-- COURSE 테이블 행 입력
INSERT INTO COURSE_TBL(COUR_NO,COUR_NAME,COUR_SCOR) VALUES (2,'영어',3);
INSERT INTO COURSE_TBL(COUR_NO,COUR_NAME,COUR_SCOR) VALUES (4,'사회',2);
INSERT INTO COURSE_TBL(COUR_NO,COUR_NAME,COUR_SCOR) VALUES (5,'과학',2);

-- PROFESSOR 테이블 행 입력
INSERT INTO PROFESSOR_TBL(PROF_NO,PROF_NAME,PROF_SBJ) VALUES (1,'LEE','영어');
INSERT INTO PROFESSOR_TBL(PROF_NO,PROF_NAME,PROF_SBJ) VALUES (3,'KIM','과학');
INSERT INTO PROFESSOR_TBL(PROF_NO,PROF_NAME,PROF_SBJ) VALUES (6,'LEE','영어');

-- STUDENT 테이블 행 입력
INSERT INTO STUDENT_TBL(STUD_NO,STUD_NAME,ADDRESS, GRADE, SPROF_NO) VALUES (703,'HRE','124-34번지',1,1);
INSERT INTO STUDENT_TBL(STUD_NO,STUD_NAME,ADDRESS, GRADE, SPROF_NO) VALUES (702,'SXC','324-34번지',3,6);
INSERT INTO STUDENT_TBL(STUD_NO,STUD_NAME,ADDRESS, GRADE, SPROF_NO) VALUES (707,'YHY','156-26번지',3,6);

-- ENROLL 테이블 행 입력
DROP SEQUENCE ENRL_SEQ;
CREATE SEQUENCE ENRL_SEQ ORDER;
    
INSERT INTO ENROLL_TBL(ENRL_NO,STUD_NO, COUR_NO, ENRL_DATE) VALUES (ENRL_SEQ.NEXTVAL,702,5,'2023/07/01');
INSERT INTO ENROLL_TBL(ENRL_NO,STUD_NO, COUR_NO, ENRL_DATE) VALUES (ENRL_SEQ.NEXTVAL,703,2,'2023/07/02');
INSERT INTO ENROLL_TBL(ENRL_NO,STUD_NO, COUR_NO, ENRL_DATE) VALUES (ENRL_SEQ.NEXTVAL,707,5,'2023/07/02');

-- LECTURE 테이블 행 입력
DROP SEQUENCE LECT_SEQ;
CREATE SEQUENCE LECT_SEQ 
    START WITH 101
    ORDER;
    
INSERT INTO LECTURE_TBL(LECT_NO,LPROF_NO, ENRL_NO, LECT_NAME, LECT_ROOM) VALUES (LECT_SEQ.NEXTVAL,6,1,'화학',101);
INSERT INTO LECTURE_TBL(LECT_NO,LPROF_NO, ENRL_NO, LECT_NAME, LECT_ROOM) VALUES (LECT_SEQ.NEXTVAL,1,2,'영어듣기',201);
INSERT INTO LECTURE_TBL(LECT_NO,LPROF_NO, ENRL_NO, LECT_NAME, LECT_ROOM) VALUES (LECT_SEQ.NEXTVAL,6,3,'생명과학',301);


COMMIT;